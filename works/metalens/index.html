<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Victor Bitca">
<meta name="description" content="Download it on the app store TL;DR: If you downloaded the app don&amp;rsquo;t forget to toggle the Safari switch in Settings
 The &amp;ldquo;Do something with Hacker News&amp;rdquo; idea Searching for HN clients on the app store results in many reasonable looking apps. Some of them abandoned a few years back, others look like a developer needed at least one random published app to apply for the job.
If another HN client is to be built, it needs some outstanding features, not necessarily useful, just something to separate it from the crowd." />
<meta name="keywords" content=", iOS, Swift, Hacker News" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://3am.engineering/works/metalens/" />


    <title>
        
            Metalens for Hacker News :: 3am engineering 
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.min.5bfb908ea0e9e0fa4f7e8016a36896c5e4f71b49cc913f137c1c0f6b4dda0525.css">




<meta itemprop="name" content="Metalens for Hacker News">
<meta itemprop="description" content="Download it on the app store TL;DR: If you downloaded the app don&rsquo;t forget to toggle the Safari switch in Settings
 The &ldquo;Do something with Hacker News&rdquo; idea Searching for HN clients on the app store results in many reasonable looking apps. Some of them abandoned a few years back, others look like a developer needed at least one random published app to apply for the job.
If another HN client is to be built, it needs some outstanding features, not necessarily useful, just something to separate it from the crowd."><meta itemprop="datePublished" content="2020-05-19T00:00:00+00:00" />
<meta itemprop="dateModified" content="2020-05-19T00:00:00+00:00" />
<meta itemprop="wordCount" content="706">
<meta itemprop="keywords" content="iOS,Swift,Hacker News," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Metalens for Hacker News"/>
<meta name="twitter:description" content="Download it on the app store TL;DR: If you downloaded the app don&rsquo;t forget to toggle the Safari switch in Settings
 The &ldquo;Do something with Hacker News&rdquo; idea Searching for HN clients on the app store results in many reasonable looking apps. Some of them abandoned a few years back, others look like a developer needed at least one random published app to apply for the job.
If another HN client is to be built, it needs some outstanding features, not necessarily useful, just something to separate it from the crowd."/>





    <meta property="article:published_time" content="2020-05-19 00:00:00 &#43;0000 UTC" />








    </head>

    <body class="dark-theme">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__text">3am engineering</span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://3am.engineering/about/">About</a></li><li><a href="https://3am.engineering/works/">Works</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            
            </p>
        </div>

        <article>
            <h2 class="post-title"><a href="https://3am.engineering/works/metalens/">Metalens for Hacker News</a></h2>

            

            <div class="post-content">
                <h4 id="download-it-on-the-app-storehttpsappsapplecomusappmetalensid1506654571ls1"><a href="https://apps.apple.com/us/app/metalens/id1506654571?ls=1">Download it on the app store</a></h4>
<p>TL;DR: If you downloaded the app don&rsquo;t forget to toggle the Safari switch in Settings</p>
<figure><img src="/images/metalens_logo.jpg"/>
</figure>

<h2 id="the-do-something-with-hacker-news-idea">The &ldquo;Do something with Hacker News&rdquo; idea</h2>
<p>Searching for HN clients on the app store results in many reasonable looking apps. Some of them abandoned a few years back, others look like a developer needed at least one random published app to apply for the job.</p>
<p>If another HN client is to be built, it needs some outstanding features, not necessarily useful, just something to separate it from the crowd.</p>
<p>But the iOS app wasn’t the first spawn of the “Do something with Hacker News” itch of mine, the first one was a newsletter prototype, complete with sketchy categorization provided by GCP NLP, even if using a combination of HN comments and text from the linked article as input.</p>
<figure><img src="/images/hn_digest_1.jpg"
         alt="Yes, very useful categorization"/><figcaption>
            <p>Yes, very useful categorization</p>
        </figcaption>
</figure>

<p>You might recognize that the same categories pop up in certain subreddits, I&rsquo;m thinking they might&rsquo;ve taken a similar approach trying to add something of value to their feeds.</p>
<h2 id="the-ios-app">The iOS app</h2>
<figure><img src="/images/metalens_app.jpg"/>
</figure>

<p>A few weeks into the &ldquo;Do something with Hacker News&rdquo; phase, I decided that the app store is missing another HN app.</p>
<p>But it can&rsquo;t be just another wrapper around the site, that would be too boring.</p>
<p>Besides the granular snapshots, it should also have a graph representation of the community engagement with the news item, both comments and upvoting activity.</p>
<p>Pretty graphs and analytics really put the &ldquo;meta&rdquo; in the &ldquo;Metalens&rdquo;!</p>
<p>For good measure throw a &ldquo;curated feed&rdquo; feature that would pick news items using &ldquo;handcrafted algorithms&rdquo;, no need to chose what to read, an algorithm can do the thinking for you.</p>
<p>Those features would make the app unique, and unique is the only thing that matters, the usefulness can wait a bit.</p>
<h2 id="swiftui">SwiftUI?</h2>
<p>Initially, the project used SwiftUI, development was going so fast and the prototyping phase went smooth.
But SwiftUI it&rsquo;s not ready for production yet, while some things are trivial other essential UIKit features are just absent.</p>
<ul>
<li>Want to implement a pull to refresh feature, nope.</li>
<li>Want to find out how far has the user scrolled the list? nope.</li>
<li>The list goes on.</li>
</ul>
<p>There are workarounds, but it felt like I was fighting SwiftUI.
Also, the app at that stage had some bizarre bugs when items in a list would not have the correct height until you scrolled a pixel or two.
Then the scrolling performance was not good, using UIKit and CoreAnimation reduced CPU time in half when scrolling the same items.
A rewrite using UIKit was imminent.</p>
<h2 id="apple-really-wants-you-to-open-links-in-safari">Apple really wants you to open links in Safari</h2>
<p>I got the same rejection reason as <a href="https://medium.com/swlh/my-app-is-dead-in-the-water-93a97a137eff">Matt Stanford with his Hacker News Zero app</a>.
The only way I could get it approved was by opening links in Safari app, while every other app seems to get away just fine by opening them in <code>SFSafariViewController</code>.
I included a toggle switch in settings when enabled opens links in <code>SFSafariViewController</code> and this seems to satisfy the reviewer,</p>
<p>The more you think about it the less sense it makes. Why Apple even added <code>SFSafariViewController</code> and recommends it as the primary way to open external links, should it only be used for ToS and Privacy Policies?</p>
<figure><img src="/images/legal_issues.jpg"
         alt="Copyright infringement?"/><figcaption>
            <p>Copyright infringement?</p>
        </figcaption>
</figure>

<h2 id="no-auto-renewing-subscriptions-for-you">No auto-renewing subscriptions for you</h2>
<p>The reviewers were very insistent that I should use a non-renewing subscription.
Shame, since I really could’ve used the total MRR of $2 generated by the turned on and forgotten $0.50 monthly auto-renewing subscription.</p>
<figure><img src="/images/subscriptions_issues.jpg"/>
</figure>

<p>But after 6 reviews and 5 iterations, Metalens finally got approved. If you plan to install and use it, then definitely toggle on the &ldquo;Use internal Safari browser&rdquo; switch.</p>
<h2 id="upcoming-features-and-improvements-maybe">Upcoming features and improvements (maybe)</h2>
<p>The app is still not there yet, it could have a few extra features of questionable usefulness bolted on.</p>
<ul>
<li>Add trends for the search feature, something similar to <a href="https://showcase.metamate.io/hackernews-trends">Metamate</a></li>
<li>Get notified when someone replies to your comments or submission.</li>
</ul>
<h2 id="the-backend">The backend</h2>
<p>Nothing special, Go + SQLite running in a VM on CGP with Cloudflare + CF Workers so I could take advantage of their network and cache in case the app gets a surge of requests, you gotta be ready in case it gets exposure to millions of users overnight, scalable!</p>

            </div>
        </article>

        <hr />

        <div class="post-info">
  				<p>
  					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://3am.engineering/tags/ios">iOS</a></span><span class="tag"><a href="https://3am.engineering/tags/swift">Swift</a></span><span class="tag"><a href="https://3am.engineering/tags/hacker-news">Hacker News</a></span>
  				</p>
  			</div>

        
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2021</span>
            
                <span><a href="https://3am.engineering/">3am engineering</a></span>
            
        </div>
    </div>
</footer>

            
        </div>

        




<script type="text/javascript" src="/bundle.min.08ccaf9cef8b4e0ebd0b0158e66a7bfc0ddbb2194cdb0099e8814ddb89cc7628b27b1158846564e6e03d9ffc5f4d1bc7dfc274d359f9408d1c63d73a3f7332e9.js" integrity="sha512-CMyvnO&#43;LTg69CwFY5mp7/A3bshlM2wCZ6IFN24nMdiiyexFYhGVk5uA9n/xfTRvH38J001n5QI0cY9c6P3My6Q=="></script>



    </body>
</html>
